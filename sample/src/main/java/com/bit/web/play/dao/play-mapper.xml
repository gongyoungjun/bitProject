<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bit.web.play.play-mapper">



	<select id="newAjaxGetSequence" resultType="Integer">
		SELECT members_SEQ.NEXTVAL FROM DUAL
	</select>
	
<!-- 	<select id="newgetDbPass" parameterType="String" resultType="String"> -->
<!-- 		SELECT PASSWORD FROM MEMBERS -->
<!-- 		WHERE ID=#{VALUE} -->
<!-- 	</select> -->
	
	

	<!--회원가입 -->
	<insert id="insertSeqNumber" parameterType="com.bit.web.play.vo.membersBean">
	INSERT INTO members(members_no, id, password, nickname, birth, email, tel, regdate, profile_img,genre1,genre2) 
	VALUES(
	members_seq.nextval,
		#{id},
		#{password},
		#{nickname},
		#{birth},
		#{email},
		#{tel},
		SYSDATE,
		#{profile_img},
		#{genre1},
		#{genre2}
		)
	</insert>
	
	<!-- 프로필 수정 -->
	
	<update id="updateData" parameterType="com.bit.web.play.vo.membersBean">
		UPDATE MEMBERS
		SET 
		nickname = #{nickname},
		tel = #{tel},
		email = #{email},
		password = #{password},		
		genre1 = #{genre1},
		genre2 = #{genre2}
	<!-- 조건문 -->
		<choose> 
	   		<when test="profile_img !=null">
	   		,profile_img=#{profile_img}
	   		</when>
	 	</choose>
 		where id= #{id}

	</update>
	
<!-- 	프로필 사진 업데이트 -->
	
	<update id="updateImg">
		UPDATE MEMBERS SET 
		profile_img = #{profile_img} 
		where id = #{id}
	</update>
	
	
<!-- 	파일을 null처리 -->
<!-- 	<choose> -->
<!-- 	 <when test="filename_img !=null"></when> -->
<!-- 	</choose> -->
	
	
	<!-- 	아이디찾는거 -->
		<select id="idSearch" parameterType="String" resultType="String">
	SELECT ID FROM MEMBERS
	WHERE EMAIL = #{value}
	</select>
	<!-- 	비밀번호 찾기 -->
	<select id="pwSearch" parameterType="HashMap" resultType="String">
	SELECT PASSWORD FROM MEMBERS
	WHERE ID = #{userId}
	WHERE EMAIL = #{pw_find_email}
	</select>
	<!-- 		로그인 -->
	<select id="loginPass" parameterType="String" resultType="String">
	SELECT PASSWORD FROM MEMBERS
	WHERE ID = #{value}
	</select>
		
		
	<!-- 	아이디 중복체크	 -->
	<select id="ajaxGetId" parameterType="String"
		resultType="String">
		SELECT * FROM MEMBERS
		WHERE ID=#{value}
	</select>	
	<!-- 	 닉네임 중복체크 -->
	<select id="ajaxGetNickname" parameterType="String"
		resultType="String">
		SELECT * FROM MEMBERS
		WHERE nickname=#{value}
	</select>		
	
	
	
	
</mapper>























